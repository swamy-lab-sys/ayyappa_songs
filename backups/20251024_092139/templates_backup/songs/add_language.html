{% extends 'base.html' %}

{% block title %}Add Language Version - {{ song.get_title }}{% endblock %}

{% block breadcrumb_extra %}
<span class="mx-2">›</span>
<a href="{% url 'song_list' %}" class="hover:text-amber-700 transition">Songs</a>
<span class="mx-2">›</span>
<a href="{% url 'song_view' song.id %}" class="hover:text-amber-700 transition">{{ song.get_title|truncatewords:5 }}</a>
<span class="mx-2">›</span>
<span class="text-amber-700 font-medium">Add Language</span>
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 sm:px-8 py-8">
  
  <div class="bg-white/90 backdrop-blur-lg border-2 border-amber-200 rounded-2xl p-8 shadow-xl">
    
    <!-- Header -->
    <div class="flex items-center gap-3 mb-6 pb-4 border-b-2 border-amber-200">
      <i class="fa-solid fa-language text-3xl text-amber-600"></i>
      <div>
        <h2 class="text-3xl font-bold text-amber-800">Add Language Version</h2>
        <p class="text-sm text-gray-600 mt-1">for: {{ song.get_title }}</p>
      </div>
    </div>
    
    <!-- Existing Languages Info -->
    <div class="mb-6 p-4 bg-blue-50 border border-blue-300 rounded-lg">
      <p class="text-sm font-semibold text-blue-800 mb-2">
        <i class="fa-solid fa-info-circle"></i> Existing Language Versions:
      </p>
      <div class="flex flex-wrap gap-2">
        {% for lang_code, lang_name in song.available_languages %}
        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
          <i class="fa-solid fa-check-circle mr-1"></i> {{ lang_name }}
        </span>
        {% endfor %}
      </div>
    </div>
    
    <form method="post">
      {% csrf_token %}
      
      <!-- Language Selection -->
      <div class="mb-6">
        <label class="block text-amber-900 font-semibold mb-2">Select Language to Add</label>
        {{ form.language }}
        {% if form.language.help_text %}
        <p class="text-xs text-gray-600 mt-1">{{ form.language.help_text }}</p>
        {% endif %}
      </div>
      
      <!-- Title -->
      <div class="mb-6">
        <label class="block text-amber-900 font-semibold mb-2">{{ form.title.label }}</label>
        {{ form.title }}
        <p class="text-xs text-gray-600 mt-1">Song title in the selected language</p>
      </div>
      
      <!-- Lyrics -->
      <div class="mb-6">
        <label class="block text-amber-900 font-semibold mb-2">{{ form.lyrics.label }}</label>
        {{ form.lyrics }}
        <p class="text-xs text-gray-600 mt-1">Lyrics in the selected language (optional)</p>
      </div>
      
      <!-- Form Errors -->
      {% if form.errors %}
      <div class="mb-6 p-4 bg-red-50 border border-red-300 rounded-lg">
        <p class="text-red-800 font-semibold mb-2">Please correct the following errors:</p>
        <ul class="list-disc list-inside text-sm text-red-700">
          {% for field, errors in form.errors.items %}
            {% for error in errors %}
              <li>{{ field }}: {{ error }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
      {% endif %}
      
      <!-- Action Buttons -->
      <div class="flex flex-wrap gap-3 pt-4 border-t-2 border-amber-200">
        <button type="submit" class="px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition font-semibold">
          <i class="fa-solid fa-plus"></i> Add Language Version
        </button>
        
        <a href="{% url 'song_view' song.id %}" class="px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition font-semibold">
          <i class="fa-solid fa-times"></i> Cancel
        </a>
      </div>
      
    </form>
    
  </div>
  
</div>
{% endblock %}
