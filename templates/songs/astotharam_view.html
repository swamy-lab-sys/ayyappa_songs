{% extends 'base.html' %}
{% load static %}

{% block title %}{{ astotharam.display_title }} - Astotharam{% endblock %}
{% block breadcrumb_extra %}
<span class="mx-2">›</span>
<a href="{% url 'song_list' %}" 
   class="inline-flex items-center gap-2 ml-4 px-3 py-1.5 bg-gradient-to-r from-amber-500 to-orange-500 
          hover:from-amber-600 hover:to-orange-600 text-white text-sm font-medium rounded-lg shadow-sm transition-all duration-200">
  <i class="fa-solid fa-plus"></i>
 Songs List
</a>
<span class="mx-2">›</span>
<span class="text-amber-700 font-medium">{{ song.get_title|truncatewords:5 }}</span>
{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Main Card -->
  <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100">
    <!-- Header -->
    <div class="bg-gradient-to-r from-purple-600 via-pink-600 to-rose-500 p-6 text-white">
      <h1 class="text-3xl font-extrabold flex items-center gap-3 tracking-wide">
        <i class="fa-solid fa-om text-4xl"></i>
        {{ astotharam.display_title }}
      </h1>

      <div class="flex gap-3 mt-3">
        <span class="px-4 py-1 bg-white/25 rounded-full text-sm font-medium backdrop-blur-md">
          🌐 {{ astotharam.get_language_display }}
        </span>
        <span class="px-4 py-1 bg-white/25 rounded-full text-sm font-medium backdrop-blur-md">
          🕉️ {{ astotharam.get_category_display }}
        </span>
      </div>
    </div>

    <!-- Body -->
    <div class="p-8 bg-gradient-to-br from-gray-50 to-purple-50">
      <div class="text-gray-800 leading-relaxed text-lg font-[500] space-y-3 overflow-y-auto max-h-[70vh] px-1">
        {% for line in saranaghosha.get_content.splitlines %}
          {% if line.strip %}
            <p class="py-1 border-b border-gray-200 last:border-none">{{ line|safe }}</p>
          {% endif %}
        {% endfor %}
      </div>

      <!-- Footer (Desktop) -->
      <div class="hidden md:flex mt-8 pt-6 border-t border-gray-200 items-center justify-between">
        <span class="text-sm text-gray-600 flex items-center gap-2">
          <i class="fa-solid fa-user text-purple-500"></i>
          Added by <span class="font-semibold">{{ astotharam.owner.username }}</span>
        </span>

        {% if user.is_authenticated %}
          {% if user.is_staff or user == astotharam.owner %}
            <div class="flex gap-3">
              <a href="{% url 'astotharam_edit' astotharam.pk %}"
                 class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow transition">
                <i class="fa-solid fa-pen-to-square mr-1"></i> Edit
              </a>
              <a href="{% url 'astotharam_delete' astotharam.pk %}"
                 class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow transition"
                 onclick="return confirm('Are you sure you want to delete this Astotharam?');">
                <i class="fa-solid fa-trash-can mr-1"></i> Delete
              </a>
            </div>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Back link -->
  <div class="mt-6 text-center">
    <a href="{% url 'astotharam_list' %}"
       class="inline-flex items-center gap-2 text-purple-700 hover:text-purple-900 font-semibold">
      <i class="fa-solid fa-arrow-left"></i> Back to List
    </a>
  </div>
</div>

<!-- Floating Action Bar (Mobile only) -->
{% if user.is_authenticated %}
  {% if user.is_staff or user == astotharam.owner %}
    <div class="fixed bottom-0 left-0 right-0 bg-gradient-to-r from-pink-600 to-purple-600 text-white flex justify-around items-center py-3 shadow-2xl md:hidden z-50">
      <a href="{% url 'astotharam_edit' astotharam.pk %}" class="flex flex-col items-center text-sm">
        <i class="fa-solid fa-pen-to-square text-xl"></i>
        <span>Edit</span>
      </a>
      <a href="{% url 'astotharam_delete' astotharam.pk %}"
         class="flex flex-col items-center text-sm"
         onclick="return confirm('Are you sure you want to delete this Astotharam?');">
        <i class="fa-solid fa-trash-can text-xl"></i>
        <span>Delete</span>
      </a>
    </div>
  {% endif %}
{% endif %}
{% endblock %}
